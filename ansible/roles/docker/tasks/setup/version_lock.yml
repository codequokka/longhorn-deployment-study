---
- name: Install the dnf versionlock plugin
  ansible.builtin.yum:
    name: dnf-command(versionlock)
    state: present

- name: Prevent installed packages from being updated
  community.general.dnf_versionlock:
    name: "{{ package }}"
    state: present
  loop_control:
    loop_var: package
  loop:
    - docker-ce
    - docker-ce-cli
    - docker-ce-rootless-extras
